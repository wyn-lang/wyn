# Wyn v1.4.0 - Standard Library Expansion

**Date:** 2026-01-22  
**Status:** ✅ Complete

## Summary

Expanded Wyn's standard library with critical string character methods and file path manipulation functions. All features implemented using TDD, fully tested, and documented.

## New Features

### String Character Methods (5 methods)

All methods check entire string and return bool (int):

- `.is_alpha()` - Check if all characters are alphabetic
- `.is_digit()` - Check if all characters are numeric
- `.is_alnum()` - Check if all characters are alphanumeric
- `.is_whitespace()` - Check if all whitespace
- `.char_at(index)` - Get character at index as string

**Use Case:** Essential for lexers, parsers, text processing

**Example:**
```wyn
var str = "hello123";
if str.is_alnum() == 1 {
    print("Alphanumeric!");
}
var first = str.char_at(0);  // "h"
```

### File Path Methods (2 new + 3 validated)

**New:**
- `File::dirname(path)` - Extract directory from path
- `File::extension(path)` - Extract file extension

**Validated & Documented:**
- `File::path_join(a, b)` - Join paths safely
- `File::basename(path)` - Extract filename
- `File::get_cwd()` - Get current directory

**Use Case:** Build systems, file processors, compilers

**Example:**
```wyn
var path = "/home/user/file.txt";
var dir = File::dirname(path);      // "/home/user"
var name = File::basename(path);    // "file.txt"
var ext = File::extension(path);    // "txt"
```

### File System Operations (Validated)

Confirmed working and documented:
- `File::list_dir(path)` - List directory contents
- `File::is_file(path)` - Check if path is file
- `File::is_dir(path)` - Check if path is directory
- `File::create_dir(path)` - Create directory
- `File::file_size(path)` - Get file size

### System Operations (Validated)

- `System::args()` - Get command line arguments as array

## Implementation Details

### Files Modified

**Core Implementation:**
- `src/types.c` - Added method signatures and mappings
- `src/codegen.c` - Implemented C functions
- `src/checker.c` - Added File:: function type signatures

**Tests:**
- `tests/stdlib/test_string_char_methods.wyn` - String char tests
- `tests/stdlib/test_file_path_methods.wyn` - Path manipulation tests
- `tests/stdlib/test_file_system_existing.wyn` - Validation tests

**Documentation:**
- `docs/stdlib-reference.md` - Updated with all new methods
- `CHANGELOG.md` - Added v1.4.0 stdlib expansion section

**Examples:**
- `examples/26_file_explorer.wyn` - Comprehensive demo

### Test Results

```
✅ All regression tests pass
✅ 26/26 examples compile
✅ 13/13 module tests pass
✅ 3 new stdlib tests pass
```

## Impact on Self-Hosting

Updated `internal-docs/SELF_HOSTING_ROADMAP.md`:

**Phase 1: Minimum Viable (v1.5.0) - Now 90% Complete**

- ✅ File system operations - COMPLETE
- ✅ String processing - COMPLETE
- ✅ Command line arguments - COMPLETE
- ⏳ Error handling - Remaining work

**Conclusion:** Wyn now has all the file and string operations needed for a self-hosting compiler. Only structured error handling remains for Phase 1.

## Commits

1. `66ee559` - feat: expand stdlib with string char and path methods
2. `5cb9e81` - docs: update self-hosting roadmap with v1.4.0 progress

## Next Steps

For v1.5.0:
1. Implement structured error handling (Result<T> or similar)
2. Add environment variable access (System::env)
3. Consider array functional methods (.map, .filter, .reduce)

---

**Wyn v1.4.0 - Production ready with comprehensive stdlib**
