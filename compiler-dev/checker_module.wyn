// checker_module.wyn - REAL IMPLEMENTATION

struct ASTNode {
    node_type: int,
    value: string,
    left: int,
    right: int,
    extra: int
}

struct Symbol {
    name: string,
    sym_type: string,
    scope: int
}

const NODE_INT = 0
const NODE_STRING = 1
const NODE_IDENT = 2
const NODE_BINARY = 3
const NODE_VAR_DECL = 4
const NODE_FN_DECL = 5
const NODE_RETURN = 6
const NODE_EXPR_STMT = 7
const NODE_BLOCK = 8
const NODE_IF = 9
const NODE_WHILE = 10
const NODE_CALL = 11

export fn check(ast: [ASTNode]) -> int {
    var error_count = 0
    var i = 0
    
    while i < ast.len() {
        var node_type = ast[i].node_type
        
        if node_type == NODE_VAR_DECL {
            var left = ast[i].left
            if left >= 0 && left < ast.len() {
                var left_type = ast[left].node_type
                if left_type != NODE_INT && left_type != NODE_IDENT && left_type != NODE_BINARY {
                    error_count = error_count + 1
                }
            }
        }
        
        if node_type == NODE_BINARY {
            var left = ast[i].left
            var right = ast[i].right
            if left < 0 || right < 0 {
                error_count = error_count + 1
            }
        }
        
        i = i + 1
    }
    
    return error_count
}

fn main() -> int {
    return 0
}
