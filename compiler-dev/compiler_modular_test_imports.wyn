// Wyn Self-Hosting Compiler - Modular Implementation
// Integrates lexer, parser, checker, codegen modules

import lexer_module
import parser_module
import checker_module
import codegen_module

fn main() -> int {
    print("Starting compilation...")
    
    var source = "var x = 42"
    
    print("Lexing...")
    var tokens = lexer_module_tokenize(source)
    print("Tokens: ")
    print(tokens.len())
    
    print("Parsing...")
    var ast = parser_module_parse(tokens)
    print("AST nodes: ")
    print(ast.len())
    
    print("Type checking...")
    var errors = checker_module_check(ast)
    print("Errors: ")
    print(errors)
    
    if errors > 0 {
        print("Compilation result: FAILED")
        return 1
    }
    
    print("Generating C code...")
    var c_code = codegen_module_generate(ast)
    print("C code length: ")
    print(c_code.len())
    
    print("Compilation result: SUCCESS")
    return 0
}
