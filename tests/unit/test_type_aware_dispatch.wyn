// Comprehensive Type-Aware Dispatch Validation
// Tests that methods dispatch correctly based on receiver type

fn main() -> int {
    var exit_code = 0;
    
    // Test 1: String.len() vs Array.len() - same method name, different types
    var str = "hello";
    var arr = [1, 2, 3];
    
    if (str.len() != 5) {
        exit_code = exit_code + 1;  // String.len() failed
    }
    
    if (arr.len() != 3) {
        exit_code = exit_code + 2;  // Array.len() failed
    }
    
    // Test 2: String.is_empty() vs Array.is_empty()
    var empty_str = "";
    var empty_arr = [];
    
    if (!(empty_str.is_empty())) {
        exit_code = exit_code + 4;  // String.is_empty() failed
    }
    
    if (!(empty_arr.is_empty())) {
        exit_code = exit_code + 8;  // Array.is_empty() failed
    }
    
    // Test 3: String.contains() vs Array.contains()
    var text = "hello world";
    var numbers = [1, 2, 3];
    
    if (!(text.contains("world"))) {
        exit_code = exit_code + 16;  // String.contains() failed
    }
    
    if (!(numbers.contains(2))) {
        exit_code = exit_code + 32;  // Array.contains() failed
    }
    
    // Test 4: Int methods vs Float methods - same names, different types
    var int_num = 42;
    var float_num = 3.14;
    
    if (!(int_num.is_even())) {
        exit_code = exit_code + 64;  // Int.is_even() failed
    }
    
    if (!(float_num.is_positive())) {
        exit_code = exit_code + 128;  // Float.is_positive() failed
    }
    
    // Test 5: Option methods vs Result methods
    var opt = some(42);
    var res = ok(100);
    
    if (!(opt.is_some())) {
        exit_code = exit_code + 256;  // Option.is_some() failed
    }
    
    if (!(res.is_ok())) {
        exit_code = exit_code + 512;  // Result.is_ok() failed
    }
    
    // Test 6: Method chaining with type preservation
    var chained = "  HELLO  ".trim().lower();
    if (chained != "hello") {
        exit_code = exit_code + 1024;  // Method chaining failed
    }
    
    return exit_code;
}
